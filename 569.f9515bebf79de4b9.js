"use strict";(self.webpackChunkGiveaspark_client=self.webpackChunkGiveaspark_client||[]).push([[569],{8569:(y,m,s)=>{s.r(m),s.d(m,{AddQuoteModule:()=>v});var g=s(6895),d=s(3262),u=s(433),e=s(1571),p=s(7177),c=s(8423),f=s(4383);function h(o,r){1&o&&(e.TgZ(0,"div",19)(1,"small",20),e._uU(2,"Writer Name is required "),e.qZA()())}function Q(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.quoteWriterImage)}}function q(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.imageFile)}}function b(o,r){1&o&&(e.TgZ(0,"div",19)(1,"small",20),e._uU(2,"Writer Profile is required "),e.qZA()())}function _(o,r){1&o&&(e.TgZ(0,"div",19)(1,"small",20),e._uU(2,"Please Add Quote "),e.qZA()())}function A(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveQuote(a.addQuoteForm.value))}),e._uU(1,"Create"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.addQuoteForm.invalid)}}function I(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateQuote(a.quoteId))}),e._uU(1,"update"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.addQuoteForm.invalid)}}const x=[{path:"",component:(()=>{class o{constructor(t,i,a,n,l,Z){this.api=t,this.route=i,this.fb=a,this.spinner=n,this.router=l,this.toast=Z,this.imageData=[],this.Submitted=!1,this.imageFile="",this.isImage=!0,this.addQuoteForm=this.fb.group({writerName:["",u.kI.required],writerProfile:["",u.kI.required],enterQuotes:["",u.kI.required]})}ngOnInit(){this.getmyQuote(),this.spinner.show(),this.getquoteId(),setTimeout(()=>{this.spinner.hide()},1e3)}onSelectImage(t){let i=t.target.files;if(this.imageFile=t.target.files[0].name,i){this.uploadImage=i[0],this.subImageSubmit();for(let n of i){if(!n.type.includes("image"))return void(this.isImage=!1);this.imageData.push(n)}}if(t.target.files&&t.target.files[0]){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=n=>{this.url=n.target?.result}}}subImageSubmit(){let t=new FormData;t.append("attachment",this.uploadImage),this.api.addAttachments(t).subscribe(i=>{console.log(i),this.imageData1=i,this.imageData2=this.imageData1[0].key,console.log(this.imageData1[0].key,"image key "),console.log(this.imageData2),this.toast.success("Image Uploaded Successfully")},i=>{console.log(i)})}saveQuote(t){this.api.addQuote({writerName:t.writerName,writerProfile:this.imageData2,enterQuotes:t.enterQuotes}).subscribe(a=>{console.log(a),this.toast.success("Added  Successfully"),this.router.navigate(["home-dashboard/myquote/myquote-dashboard"])},a=>{this.toast.error("please try again")})}getquoteId(){this.route.queryParamMap.subscribe(t=>{this.quoteId=Number(t.params.quoteId||0),console.log(this.quoteId,"iddd"),0==this.quoteId&&this.getmyQuote()})}getmyQuote(){this.api.getMyQuotes().subscribe(t=>{this.quotesList=t?.result,this.quotesList.filter(i=>{i?._id==this.quoteId&&this.getBindData(i)})})}getBindData(t){console.log(t,"quote llist"),this.quoteName=t?.enterQuotes,this.quoteWriterImage=t?.writerProfile,this.imageData2&&(this.quoteWriterImage=this.imageData2),this.quoteWriterName=t?.writerName}updateQuote(t){let i=t;console.log(i,"idiiid"),this.api.updateQuotes(i,{writerName:this.quoteWriterName,writerProfile:this.imageData2?this.imageData2:this.quoteWriterImage,enterQuotes:this.quoteName}).subscribe(n=>{console.log(n,"update quote"),this.toast.success("Updated Successfully"),this.router.navigate(["home-dashboard/myquote/myquote-dashboard"])})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.O),e.Y36(d.gz),e.Y36(u.qu),e.Y36(c.t2),e.Y36(d.F0),e.Y36(f._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-quote"]],decls:32,vars:10,consts:[[1,"row","m-0","p-0","mt-5","align-items-center"],[1,"col-md-12","col-lg-12"],[1,"border-bottom"],[1,"row","m-0","p-0","mt-4"],[1,"row","position-relative",3,"formGroup"],[1,"col-md-6","col-lg-6"],[1,"mb-2"],["for","exampleInputfiled",1,"form-label"],["type","text","id","exampleInputfiled","aria-describedby","textHelp","formControlName","writerName",1,"form-control","rounded-0","p-2",3,"ngModel","ngModelChange"],["class","text-danger  fs-12text-sm",4,"ngIf"],[1,"mb-3"],[1,"image-upload"],[4,"ngIf"],["for","file-input"],["aria-hidden","true",1,"fa","fa-folder",2,"position","absolute","/* display","flex","*/right","18px","top","18px"],["id","file-input","accept","image/gif, image/jpeg, image/png","type","file","formControlName","writerProfile",3,"change"],["for","exampleFormControlTextarea1",1,"form-label"],["placeholder","Enter quote","id","exampleFormControlTextarea1","formControlName","enterQuotes","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","class","btn green-btn",3,"disabled","click",4,"ngIf"],[1,"text-danger","fs-12text-sm"],[1,"fs-12"],["type","submit",1,"btn","green-btn",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Create Quote"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",1)(7,"form",4)(8,"div",5)(9,"div",6)(10,"label",7),e._uU(11,"Your Name"),e.qZA(),e.TgZ(12,"input",8),e.NdJ("ngModelChange",function(n){return i.quoteWriterName=n}),e.qZA(),e.YNc(13,h,3,0,"div",9),e.qZA()(),e.TgZ(14,"div",5)(15,"div",10),e._uU(16,"Image "),e.TgZ(17,"div",11),e.YNc(18,Q,2,1,"span",12),e.YNc(19,q,2,1,"span",12),e.TgZ(20,"label",13),e._UZ(21,"i",14),e.qZA(),e.TgZ(22,"input",15),e.NdJ("change",function(n){return i.onSelectImage(n)}),e.qZA()(),e.YNc(23,b,3,0,"div",9),e.qZA()(),e.TgZ(24,"div",10)(25,"label",16),e._uU(26,"Enter Quote "),e.qZA(),e.TgZ(27,"textarea",17),e.NdJ("ngModelChange",function(n){return i.quoteName=n}),e.qZA(),e.YNc(28,_,3,0,"div",9),e.qZA(),e.TgZ(29,"div",5),e.YNc(30,A,2,1,"button",18),e.YNc(31,I,2,1,"button",18),e.qZA()()()()()()),2&t){let a,n,l;e.xp6(7),e.Q6J("formGroup",i.addQuoteForm),e.xp6(5),e.Q6J("ngModel",i.quoteWriterName),e.xp6(1),e.Q6J("ngIf",null==(a=i.addQuoteForm.get("writerName"))?null:a.hasError("required")),e.xp6(5),e.Q6J("ngIf",!i.url),e.xp6(1),e.Q6J("ngIf",i.url),e.xp6(4),e.Q6J("ngIf",null==(n=i.addQuoteForm.get("writerProfile"))?null:n.hasError("required")),e.xp6(4),e.Q6J("ngModel",i.quoteName),e.xp6(1),e.Q6J("ngIf",null==(l=i.addQuoteForm.get("enterQuotes"))?null:l.hasError("required")),e.xp6(2),e.Q6J("ngIf",!i.quoteId),e.xp6(1),e.Q6J("ngIf",i.quoteId)}},dependencies:[g.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u],styles:[".image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}.image-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;cursor:pointer}.image-upload[_ngcontent-%COMP%]{font-size:15px!important;border-radius:6px;border:1px solid #e8e8ea;background-color:#eff0f2;padding:13px;width:100%}"]}),o})()}];let C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(x),d.Bz]}),o})(),v=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,C,u.UX,u.u5]}),o})()}}]);