"use strict";(self.webpackChunkGiveaspark_client=self.webpackChunkGiveaspark_client||[]).push([[569],{8569:(I,m,s)=>{s.r(m),s.d(m,{AddQuoteModule:()=>Z});var g=s(6895),u=s(3262),i=s(433),e=s(1571),p=s(7177),f=s(8423),c=s(4383);function h(t,l){1&t&&(e.TgZ(0,"div",16)(1,"small",17),e._uU(2,"Writer Name is required "),e.qZA()())}function Q(t,l){1&t&&(e.TgZ(0,"div",16)(1,"small",17),e._uU(2,"Writer Profile is required "),e.qZA()())}function A(t,l){1&t&&(e.TgZ(0,"div",16)(1,"small",17),e._uU(2,"Please Add Quote "),e.qZA()())}const v=[{path:"",component:(()=>{class t{constructor(o,r,a,n,d){this.api=o,this.fb=r,this.spinner=a,this.router=n,this.toast=d,this.imageData=[],this.Submitted=!1,this.imageFile="",this.isImage=!0,this.addQuoteForm=this.fb.group({writerName:["",i.kI.required],writerProfile:["",i.kI.required],enterQuotes:["",i.kI.required]})}ngOnInit(){this.spinner.show(),setTimeout(()=>{this.spinner.hide()},1e3)}onSelectImage(o){let r=o.target.files;if(this.imageFile=o.target.files[0].name,r){this.uploadImage=r[0],this.subImageSubmit();for(let n of r){if(!n.type.includes("image"))return void(this.isImage=!1);this.imageData.push(n)}}if(o.target.files&&o.target.files[0]){var a=new FileReader;a.readAsDataURL(o.target.files[0]),a.onload=n=>{this.url=n.target?.result}}}subImageSubmit(){let o=new FormData;o.append("attachment",this.uploadImage),this.api.addAttachments(o).subscribe(r=>{console.log(r),this.imageData1=r,this.imageData2=this.imageData1[0].key,console.log(this.imageData1[0].key,"image key "),console.log(this.imageData2),this.toast.success("Image Uploaded Successfully")},r=>{console.log(r)})}saveQuote(o){this.api.addQuote({writerName:o.writerName,writerProfile:this.imageData2,enterQuotes:o.enterQuotes}).subscribe(a=>{console.log(a),this.toast.success("Added  Successfully"),this.router.navigate(["home-dashboard/myquote/quote-dashboard"])},a=>{this.toast.error("please try again")})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(p.O),e.Y36(i.qu),e.Y36(f.t2),e.Y36(u.F0),e.Y36(c._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-quote"]],decls:28,vars:5,consts:[[1,"row","m-0","p-0","mt-5","align-items-center"],[1,"col-md-12","col-lg-12"],[1,"border-bottom"],[1,"row","m-0","p-0","mt-4"],[1,"row","position-relative",3,"formGroup","ngSubmit"],[1,"col-md-6","col-lg-6"],[1,"mb-2"],["for","exampleInputfiled",1,"form-label"],["type","text","id","exampleInputfiled","aria-describedby","textHelp","formControlName","writerName",1,"form-control","rounded-0","p-2"],["class","text-danger  fs-12text-sm",4,"ngIf"],[1,"mb-3"],["for","formFile",1,"form-label"],["type","file","accept","image/png, image/gif, image/jpeg","id","formFile","formControlName","writerProfile",1,"form-control","p-2",3,"change"],["for","exampleFormControlTextarea1",1,"form-label"],["placeholder","Enter quote","id","exampleFormControlTextarea1","formControlName","enterQuotes","rows","3",1,"form-control"],["type","submit",1,"btn","green-btn",3,"disabled"],[1,"text-danger","fs-12text-sm"],[1,"fs-12"]],template:function(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Create Quote"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",1)(7,"form",4),e.NdJ("ngSubmit",function(){return r.saveQuote(r.addQuoteForm.value)}),e.TgZ(8,"div",5)(9,"div",6)(10,"label",7),e._uU(11,"Your Name"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,h,3,0,"div",9),e.qZA()(),e.TgZ(14,"div",5)(15,"div",10)(16,"label",11),e._uU(17,"Image"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("change",function(n){return r.onSelectImage(n)}),e.qZA(),e.YNc(19,Q,3,0,"div",9),e.qZA()(),e.TgZ(20,"div",10)(21,"label",13),e._uU(22,"Enter Quote "),e.qZA(),e._UZ(23,"textarea",14),e.YNc(24,A,3,0,"div",9),e.qZA(),e.TgZ(25,"div",5)(26,"button",15),e._uU(27,"Create"),e.qZA()()()()()()()),2&o){let a,n,d;e.xp6(7),e.Q6J("formGroup",r.addQuoteForm),e.xp6(6),e.Q6J("ngIf",null==(a=r.addQuoteForm.get("writerName"))?null:a.hasError("required")),e.xp6(6),e.Q6J("ngIf",null==(n=r.addQuoteForm.get("writerProfile"))?null:n.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(d=r.addQuoteForm.get("enterQuotes"))?null:d.hasError("required")),e.xp6(2),e.Q6J("disabled",r.addQuoteForm.invalid)}},dependencies:[g.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(v),u.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,b,i.UX,i.u5]}),t})()}}]);