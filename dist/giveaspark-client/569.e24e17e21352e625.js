"use strict";(self.webpackChunkGiveaspark_client=self.webpackChunkGiveaspark_client||[]).push([[569],{8569:(N,m,u)=>{u.r(m),u.d(m,{AddQuoteModule:()=>v});var g=u(6895),d=u(3262),n=u(433),e=u(1571),c=u(7177),p=u(8423),f=u(4383);function h(i,s){1&i&&(e.TgZ(0,"div",16)(1,"small",17),e._uU(2,"Writer Name is required "),e.qZA()())}function Q(i,s){1&i&&(e.TgZ(0,"div",16)(1,"small",17),e._uU(2,"Writer Profile is required "),e.qZA()())}function b(i,s){1&i&&(e.TgZ(0,"div",16)(1,"small",17),e._uU(2,"Please Add Quote "),e.qZA()())}function q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.saveQuote(r.addQuoteForm.value))}),e._uU(1,"Create"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.addQuoteForm.invalid)}}function A(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateQuote(r.quoteId))}),e._uU(1,"update"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.addQuoteForm.invalid)}}const I=[{path:"",component:(()=>{class i{constructor(t,o,r,a,l,C){this.api=t,this.route=o,this.fb=r,this.spinner=a,this.router=l,this.toast=C,this.imageData=[],this.Submitted=!1,this.imageFile="",this.isImage=!0,this.addQuoteForm=this.fb.group({writerName:["",n.kI.required],writerProfile:["",n.kI.required],enterQuotes:["",n.kI.required]})}ngOnInit(){this.getmyQuote(),this.spinner.show(),this.getquoteId(),setTimeout(()=>{this.spinner.hide()},1e3)}onSelectImage(t){let o=t.target.files;if(this.imageFile=t.target.files[0].name,o){this.uploadImage=o[0],this.subImageSubmit();for(let a of o){if(!a.type.includes("image"))return void(this.isImage=!1);this.imageData.push(a)}}if(t.target.files&&t.target.files[0]){var r=new FileReader;r.readAsDataURL(t.target.files[0]),r.onload=a=>{this.url=a.target?.result}}}subImageSubmit(){let t=new FormData;t.append("attachment",this.uploadImage),this.api.addAttachments(t).subscribe(o=>{console.log(o),this.imageData1=o,this.imageData2=this.imageData1[0].key,console.log(this.imageData1[0].key,"image key "),console.log(this.imageData2),this.toast.success("Image Uploaded Successfully")},o=>{console.log(o)})}saveQuote(t){this.api.addQuote({writerName:t.writerName,writerProfile:this.imageData2,enterQuotes:t.enterQuotes}).subscribe(r=>{console.log(r),this.toast.success("Added  Successfully"),this.router.navigate(["home-dashboard/myquote/quote-dashboard"])},r=>{this.toast.error("please try again")})}getquoteId(){this.route.queryParamMap.subscribe(t=>{this.quoteId=Number(t.params.quoteId||0),console.log(this.quoteId,"iddd"),0==this.quoteId&&this.getmyQuote()})}getmyQuote(){this.api.getMyQuotes().subscribe(t=>{this.quotesList=t?.result,this.quotesList.filter(o=>{o?._id==this.quoteId&&this.getBindData(o)})})}getBindData(t){console.log(t,"quote llist"),this.quoteName=t?.enterQuotes,this.quoteWriterImage=t?.writerProfile,this.quoteWriterName=t?.writerName}updateQuote(t){let o=t;console.log(o,"idiiid"),this.api.updateQuotes(o,{writerName:this.quoteWriterName,writerProfile:this.imageData2?this.imageData2:this.quoteWriterImage,enterQuotes:this.quoteName}).subscribe(a=>{console.log(a,"update quote"),this.toast.success("Updated Successfully"),this.router.navigate(["home-dashboard/myquote/quote-dashboard"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.O),e.Y36(d.gz),e.Y36(n.qu),e.Y36(p.t2),e.Y36(d.F0),e.Y36(f._W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-quote"]],decls:28,vars:8,consts:[[1,"row","m-0","p-0","mt-5","align-items-center"],[1,"col-md-12","col-lg-12"],[1,"border-bottom"],[1,"row","m-0","p-0","mt-4"],[1,"row","position-relative",3,"formGroup"],[1,"col-md-6","col-lg-6"],[1,"mb-2"],["for","exampleInputfiled",1,"form-label"],["type","text","id","exampleInputfiled","aria-describedby","textHelp","formControlName","writerName",1,"form-control","rounded-0","p-2",3,"ngModel","ngModelChange"],["class","text-danger  fs-12text-sm",4,"ngIf"],[1,"mb-3"],["for","formFile",1,"form-label"],["type","file","accept","image/png, image/gif, image/jpeg","id","formFile","formControlName","writerProfile",1,"form-control","p-2",3,"change"],["for","exampleFormControlTextarea1",1,"form-label"],["placeholder","Enter quote","id","exampleFormControlTextarea1","formControlName","enterQuotes","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["type","submit","class","btn green-btn",3,"disabled","click",4,"ngIf"],[1,"text-danger","fs-12text-sm"],[1,"fs-12"],["type","submit",1,"btn","green-btn",3,"disabled","click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Create Quote"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",1)(7,"form",4)(8,"div",5)(9,"div",6)(10,"label",7),e._uU(11,"Your Name"),e.qZA(),e.TgZ(12,"input",8),e.NdJ("ngModelChange",function(a){return o.quoteWriterName=a}),e.qZA(),e.YNc(13,h,3,0,"div",9),e.qZA()(),e.TgZ(14,"div",5)(15,"div",10)(16,"label",11),e._uU(17,"Image"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("change",function(a){return o.onSelectImage(a)}),e.qZA(),e.YNc(19,Q,3,0,"div",9),e.qZA()(),e.TgZ(20,"div",10)(21,"label",13),e._uU(22,"Enter Quote "),e.qZA(),e.TgZ(23,"textarea",14),e.NdJ("ngModelChange",function(a){return o.quoteName=a}),e.qZA(),e.YNc(24,b,3,0,"div",9),e.qZA(),e.TgZ(25,"div",5),e.YNc(26,q,2,1,"button",15),e.YNc(27,A,2,1,"button",15),e.qZA()()()()()()),2&t){let r,a,l;e.xp6(7),e.Q6J("formGroup",o.addQuoteForm),e.xp6(5),e.Q6J("ngModel",o.quoteWriterName),e.xp6(1),e.Q6J("ngIf",null==(r=o.addQuoteForm.get("writerName"))?null:r.hasError("required")),e.xp6(6),e.Q6J("ngIf",null==(a=o.addQuoteForm.get("writerProfile"))?null:a.hasError("required")),e.xp6(4),e.Q6J("ngModel",o.quoteName),e.xp6(1),e.Q6J("ngIf",null==(l=o.addQuoteForm.get("enterQuotes"))?null:l.hasError("required")),e.xp6(2),e.Q6J("ngIf",!o.quoteId),e.xp6(1),e.Q6J("ngIf",o.quoteId)}},dependencies:[g.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]}),i})()}];let _=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(I),d.Bz]}),i})(),v=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,_,n.UX,n.u5]}),i})()}}]);