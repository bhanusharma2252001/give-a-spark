"use strict";(self.webpackChunkGiveaspark_client=self.webpackChunkGiveaspark_client||[]).push([[647],{6647:(q,u,s)=>{s.r(u),s.d(u,{MyquoteModule:()=>A});var p=s(6895),l=s(3262),d=s(433),t=s(1571),g=s(7177),y=s(4383),c=s(8423);function h(o,a){1&o&&(t.TgZ(0,"div",18)(1,"small",19),t._uU(2,"Writer Name is required "),t.qZA()())}function f(o,a){1&o&&(t.TgZ(0,"div",18)(1,"small",19),t._uU(2,"Writer Profile is required "),t.qZA()())}function b(o,a){1&o&&(t.TgZ(0,"div",18)(1,"small",19),t._uU(2,"Please add Story "),t.qZA()())}function S(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveStory(i.addStoryForm.value))}),t._uU(1,"Create"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.addStoryForm.invalid)}}function C(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateStory(i.storyId))}),t._uU(1,"Create"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.addStoryForm.invalid)}}const v=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-myquote"]],decls:1,vars:0,template:function(e,r){1&e&&t._UZ(0,"router-outlet")},dependencies:[l.lC]}),o})(),children:[{path:"",redirectTo:"quote-dashboard",pathMatch:"full"},{path:"quote-dashboard",loadChildren:()=>s.e(446).then(s.bind(s,4446)).then(o=>o.QuoteDashboardModule)},{path:"add-quote",loadChildren:()=>s.e(569).then(s.bind(s,8569)).then(o=>o.AddQuoteModule)},{path:"add-story",component:(()=>{class o{constructor(e,r,i,n,m,M){this.api=e,this.route=r,this.fb=i,this.router=n,this.toast=m,this.spinner=M,this.imageData=[],this.Submitted=!1,this.imageFile="",this.isImage=!0,this.addStoryForm=this.fb.group({writerName:["",d.kI.required],writerProfile:["",d.kI.required],enterStories:["",d.kI.required]})}ngOnInit(){this.spinner.show(),this.getstoryId(),this.getmyStory(),setTimeout(()=>{this.spinner.hide()},1e3)}onSelectImage(e){let r=e.target.files;if(this.imageFile=e.target.files[0].name,r){this.uploadImage=r[0],this.subImageSubmit();for(let n of r){if(!n.type.includes("image"))return void(this.isImage=!1);this.imageData.push(n)}}if(e.target.files&&e.target.files[0]){var i=new FileReader;i.readAsDataURL(e.target.files[0]),i.onload=n=>{this.url=n.target?.result}}}subImageSubmit(){let e=new FormData;e.append("attachment",this.uploadImage),this.api.addAttachments(e).subscribe(r=>{console.log(r),this.imageData1=r,this.imageData2=this.imageData1[0].key,this.toast.success("Image Uploaded Successfully")},r=>{console.log(r)})}get f(){return this.addStoryForm.controls}saveStory(e){this.api.addMyStory({writerName:e.writerName,writerProfile:this.imageData2,enterStories:e.enterStories}).subscribe(i=>{console.log(i),this.toast.success("Added  Successfully"),this.router.navigate(["home-dashboard/myquote/quote-dashboard"])},i=>{this.toast.error("please try again")})}getstoryId(){this.route.queryParamMap.subscribe(e=>{this.storyId=Number(e.params.storyId||0),console.log(this.storyId,"iddd"),0==this.storyId&&this.getmyStory()})}getmyStory(){this.api.getMyStory().subscribe(e=>{this.storyList=e?.result,this.storyList.filter(r=>{r?._id==this.storyId&&this.getBindData(r)})})}getBindData(e){console.log(e,"story llist"),this.storyName=e?.enterStories,this.storyWriterImage=e?.writerProfile,this.storyWriterName=e?.writerName}updateStory(e){let r=e;console.log(r,"idiiid"),this.api.updateStory(r,{writerName:this.storyWriterName,writerProfile:this.imageData2?this.imageData2:this.storyWriterImage,enterStories:this.storyName}).subscribe(n=>{console.log(n,"update story"),this.toast.success("Updated Successfully"),this.router.navigate(["home-dashboard/myquote/quote-dashboard"])})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.O),t.Y36(l.gz),t.Y36(d.qu),t.Y36(l.F0),t.Y36(y._W),t.Y36(c.t2))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-story"]],decls:30,vars:8,consts:[[1,"row","m-0","p-0","mt-3","mb-130px"],[1,"col-md-7","col-lg-10"],[1,"row","m-0","p-0","mt-5","align-items-center"],[1,"col-md-12","col-lg-12"],[1,"border-bottom"],[1,"row","m-0","p-0","mt-4"],[1,"row","position-relative",3,"formGroup"],[1,"col-md-6","col-lg-6"],[1,"mb-2"],["for","exampleInputfiled",1,"form-label"],["type","text","formControlName","writerName","id","exampleInputfiled","aria-describedby","textHelp",1,"form-control","border-blue","rounded-0","p-2",3,"ngModel","ngModelChange"],["class","text-danger  fs-12text-sm",4,"ngIf"],[1,"mb-3"],["for","formFile",1,"form-label"],["type","file","accept","image/png, image/gif, image/jpeg","id","formFile","formControlName","writerProfile",1,"form-control","border-blue","p-2",3,"change"],["for","exampleFormControlTextarea1",1,"form-label"],["placeholder","Enter story","id","exampleFormControlTextarea1","rows","3","formControlName","enterStories",1,"form-control","border-blue",3,"ngModel","ngModelChange"],["type","submit","class","btn green-btn",3,"disabled","click",4,"ngIf"],[1,"text-danger","fs-12text-sm"],[1,"fs-12"],["type","submit",1,"btn","green-btn",3,"disabled","click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),t._uU(6,"Create Story"),t.qZA()(),t.TgZ(7,"div",5)(8,"div",3)(9,"form",6)(10,"div",7)(11,"div",8)(12,"label",9),t._uU(13,"Your Name"),t.qZA(),t.TgZ(14,"input",10),t.NdJ("ngModelChange",function(n){return r.storyWriterName=n}),t.qZA(),t.YNc(15,h,3,0,"div",11),t.qZA()(),t.TgZ(16,"div",7)(17,"div",12)(18,"label",13),t._uU(19,"Image"),t.qZA(),t.TgZ(20,"input",14),t.NdJ("change",function(n){return r.onSelectImage(n)}),t.qZA(),t.YNc(21,f,3,0,"div",11),t.qZA()(),t.TgZ(22,"div",12)(23,"label",15),t._uU(24,"Enter Story "),t.qZA(),t.TgZ(25,"textarea",16),t.NdJ("ngModelChange",function(n){return r.storyName=n}),t.qZA(),t.YNc(26,b,3,0,"div",11),t.qZA(),t.TgZ(27,"div",7),t.YNc(28,S,2,1,"button",17),t.YNc(29,C,2,1,"button",17),t.qZA()()()()()()()()),2&e){let i,n,m;t.xp6(9),t.Q6J("formGroup",r.addStoryForm),t.xp6(5),t.Q6J("ngModel",r.storyWriterName),t.xp6(1),t.Q6J("ngIf",null==(i=r.addStoryForm.get("writerName"))?null:i.hasError("required")),t.xp6(6),t.Q6J("ngIf",null==(n=r.addStoryForm.get("writerProfile"))?null:n.hasError("required")),t.xp6(4),t.Q6J("ngModel",r.storyName),t.xp6(1),t.Q6J("ngIf",null==(m=r.addStoryForm.get("enterStories"))?null:m.hasError("required")),t.xp6(2),t.Q6J("ngIf",!r.storyId),t.xp6(1),t.Q6J("ngIf",r.storyId)}},dependencies:[p.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u]}),o})()}]}];let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(v),l.Bz]}),o})(),A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,I,d.UX,d.u5,c.ef]}),o})()}}]);