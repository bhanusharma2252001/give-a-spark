"use strict";(self.webpackChunkGiveaspark_client=self.webpackChunkGiveaspark_client||[]).push([[600],{4600:(b,m,n)=>{n.r(m),n.d(m,{AddStoryModule:()=>S});var u=n(6895),d=n(6773),a=n(433),t=n(8256),g=n(7177),p=n(7185);function f(o,l){1&o&&(t.TgZ(0,"div"),t._uU(1,"Please provide name"),t.qZA())}function c(o,l){if(1&o&&(t.TgZ(0,"div",12),t.YNc(1,f,2,0,"div",13),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.f.writerName.errors?null:e.f.writerName.errors.required)}}const h=[{path:"",component:(()=>{class o{constructor(e,r,i,s){this.api=e,this.fb=r,this.router=i,this.toast=s,this.imageData=[],this.Submitted=!1,this.imageFile="",this.isImage=!0,this.addStoryForm=this.fb.group({writerName:["",a.kI.required],writerProfile:[""],enterStories:[""]})}ngOnInit(){}onSelectImage(e){let r=e.target.files;if(this.imageFile=e.target.files[0].name,r){this.uploadImage=r[0],this.subImageSubmit();for(let s of r){if(!s.type.includes("image"))return void(this.isImage=!1);this.imageData.push(s)}}if(e.target.files&&e.target.files[0]){var i=new FileReader;i.readAsDataURL(e.target.files[0]),i.onload=s=>{this.url=s.target?.result}}}subImageSubmit(){let e=new FormData;e.append("attachment",this.uploadImage),this.api.addAttachments(e).subscribe(r=>{console.log(r),this.imageData1=r,this.imageData2=this.imageData1[0].key,console.log(this.imageData1[0].key,"image key "),console.log(this.imageData2)},r=>{console.log(r)})}get f(){return this.addStoryForm.controls}saveStory(e){this.api.addMyStory({writerName:e.writerName,writerProfile:this.imageData2,enterStories:e.enterStories}).subscribe(i=>{console.log(i),this.toast.success("Added  Successfully"),this.router.navigate(["home-dashboard/mystory/story-dashboard"])},i=>{this.toast.error("please try again")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.O),t.Y36(a.qu),t.Y36(d.F0),t.Y36(p._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-story"]],decls:20,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label","text-blue","fs-12"],["type","text","id","exampleFormControlInput1","placeholder","writefrName","formControlName","writerName",1,"form-control","text-dark","bg-semiblack","p-3"],["class","alert  text-danger",4,"ngIf"],[1,"col-md-4","col-lg-4"],[1,"form-floating","mt-2","upload-file","text-white","bg-semiblack"],["type","file","accept","image/png, image/gif, image/jpeg","placeholder","name@example.com","formControlName","writerProfile",1,"p-2","form-control","text-dark","fs-14","fw-light",3,"change"],["for","floatingInput",1,"upload-document","p-2","fs-14","pt-3","text-white"],["type","text","id","exampleFormControlInput1","placeholder","Write Quote","formControlName","enterStories",1,"form-control","text-dark","bg-semiblack","p-3"],[1,"mt-2"],["type","submit",1,"blue-btn","p-1","pe-3","ps-3"],[1,"alert","text-danger"],[4,"ngIf"]],template:function(e,r){1&e&&(t.TgZ(0,"div")(1,"form",0),t.NdJ("ngSubmit",function(){return r.saveStory(r.addStoryForm.value)}),t.TgZ(2,"div",1)(3,"label",2),t._uU(4,"Writer Name"),t.qZA(),t._UZ(5,"input",3),t.YNc(6,c,2,1,"div",4),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"input",7),t.NdJ("change",function(s){return r.onSelectImage(s)}),t.qZA(),t.TgZ(10,"label",8),t._uU(11,"Upload Image"),t.qZA()()(),t.TgZ(12,"div",1)(13,"label",2),t._uU(14," Quote"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",5)(17,"div",10)(18,"button",11),t._uU(19,"Submit"),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",r.addStoryForm),t.xp6(5),t.Q6J("ngIf",r.f.writerName.touched&&r.f.writerName.invalid))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".input-touched[_ngcontent-%COMP%]{border-color:red;background-color:none}"]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(h),d.Bz]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,y,a.u5,a.UX]}),o})()}}]);