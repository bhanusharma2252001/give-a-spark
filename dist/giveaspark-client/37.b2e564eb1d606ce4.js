"use strict";(self.webpackChunkGiveaspark_client=self.webpackChunkGiveaspark_client||[]).push([[37],{6037:(k,f,s)=>{s.r(f),s.d(f,{MyprofileModule:()=>J});var d=s(6895),p=s(3262),e=s(1571);let h=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-myprofile"]],decls:1,vars:0,template:function(i,t){1&i&&e._UZ(0,"router-outlet")},dependencies:[p.lC]}),o})();var c=s(7177),m=s(8423);function b(o,l){1&o&&e._UZ(0,"img",28)}function _(o,l){if(1&o&&e._UZ(0,"img",29),2&o){const i=e.oxw();e.MGl("src","https://giveaspark.s3.us-west-1.amazonaws.com/",null==i.userDetails?null:i.userDetails.profile,"",e.LSH)}}function y(o,l){1&o&&(e.TgZ(0,"p",30),e._uU(1,"Phone : "),e.qZA())}function D(o,l){1&o&&(e.TgZ(0,"p",30),e._uU(1,"Country : "),e.qZA())}function Z(o,l){1&o&&(e.TgZ(0,"p",30),e._uU(1,"Address : "),e.qZA())}function C(o,l){1&o&&(e.TgZ(0,"p",30),e._uU(1,"D.O.B : "),e.qZA())}function v(o,l){1&o&&(e.TgZ(0,"p",31),e._uU(1,"Bio : "),e.qZA())}let T=(()=>{class o{constructor(i,t,r,n){this.api=i,this.route=t,this.router=r,this.spinner=n,this.route.queryParams.subscribe(u=>{if(u?.token){let g=atob(u?.token);this.profileData(g)}else if(sessionStorage.getItem("ClientSpark")){let g=sessionStorage.getItem("ClientSpark");this.profileData(g)}})}ngOnInit(){this.spinner.show(),setTimeout(()=>{this.spinner.hide()},1e3)}profileData(i){this.api.getUserProfile(i).subscribe(t=>{this.userDetails=t[0],console.log(this.userDetails?.address[0]?.addressline,"addddd")})}navigate(){this.router.navigate(["/home-dashboard/myprofile/update-profile"])}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(c.O),e.Y36(p.gz),e.Y36(p.F0),e.Y36(m.t2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile-dashboard"]],decls:50,vars:19,consts:[[1,"col-md-7","col-lg-10","mt-4"],[1,"row","m-0","p-0","align-items-center"],[1,"col-md-2","col-lg-2","mt-2","m-0","p-0"],[1,"rounded-circle","bg-darkgray","wh-225","position-relative"],[1,"position-absolute","top-50","start-50","translate-middle"],["class","wh-225 p-2","src","assets/images/profile-image.png",4,"ngIf"],["class","wh-225 p-2 rounded-circle",3,"src",4,"ngIf"],[1,"position-absolute","top-50","start-0","ps-5","translate-middle"],[1,"rounded-circle","bg-black","position-relative"],[1,"col-md-10","col-lg-10","mt-2","m-0","p-0"],[1,"bg-darkblue","rounded-pill","details-plan","p-0"],[1,"row","ps-5","p-3"],[1,"col-md-5","col-lg-5"],[1,"d-flex","justify-content-between"],[1,"text-white","font_strt"],["src","assets/images/edit.png","alt","",1,"wh-30",3,"click"],[1,"text-yellow"],[1,"text-gray"],[1,"col-md-7","col-lg-7"],[1,"row","m-0","p-0","mt-5","align-items-center"],[1,"col-md-10","col-lg-10"],[1,"row","m-0","p-0"],[1,"col-md-6","col-lg-6"],[1,"d-flex"],["class","fw-400 fs-16 text-black fw-bold",4,"ngIf"],[1,"fw-400","fs-16","ps-3"],[1,"col-md-12","col-lg-12"],["class","fw-400 fs-16 text-black fw-bold text-nowrap",4,"ngIf"],["src","assets/images/profile-image.png",1,"wh-225","p-2"],[1,"wh-225","p-2","rounded-circle",3,"src"],[1,"fw-400","fs-16","text-black","fw-bold"],[1,"fw-400","fs-16","text-black","fw-bold","text-nowrap"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.YNc(5,b,1,0,"img",5),e.YNc(6,_,1,1,"img",6),e.qZA(),e.TgZ(7,"div",7),e._UZ(8,"div",8),e.qZA()()(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"h4",14),e._uU(15),e.qZA(),e.TgZ(16,"img",15),e.NdJ("click",function(){return t.navigate()}),e.qZA()(),e.TgZ(17,"h6",16),e._uU(18),e.qZA(),e.TgZ(19,"p",17),e._uU(20),e.qZA()(),e._UZ(21,"div",18),e.qZA()()()(),e.TgZ(22,"div",19),e._UZ(23,"div",2),e.TgZ(24,"div",20)(25,"div",21)(26,"div",22)(27,"div",23),e.YNc(28,y,2,0,"p",24),e.TgZ(29,"p",25),e._uU(30),e.qZA()(),e.TgZ(31,"div",23),e.YNc(32,D,2,0,"p",24),e.TgZ(33,"p",25),e._uU(34),e.qZA()()(),e.TgZ(35,"div",22)(36,"div",23),e.YNc(37,Z,2,0,"p",24),e.TgZ(38,"p",25),e._uU(39),e.qZA()(),e.TgZ(40,"div",23),e.YNc(41,C,2,0,"p",24),e.TgZ(42,"p",25),e._uU(43),e.ALo(44,"date"),e.qZA()()(),e.TgZ(45,"div",26)(46,"div",23),e.YNc(47,v,2,0,"p",27),e.TgZ(48,"p",25),e._uU(49),e.qZA()()()()()()()),2&i&&(e.xp6(5),e.Q6J("ngIf",!(null!=t.userDetails&&t.userDetails.profile)),e.xp6(1),e.Q6J("ngIf",null==t.userDetails?null:t.userDetails.profile),e.xp6(9),e.hij(" ",null==t.userDetails?null:t.userDetails.firstName," "),e.xp6(3),e.Oqu(null==t.userDetails?null:t.userDetails.designation),e.xp6(2),e.Oqu(null==t.userDetails?null:t.userDetails.email),e.xp6(8),e.Q6J("ngIf",null==t.userDetails?null:t.userDetails.phone),e.xp6(2),e.AsE(" ",null==t.userDetails?null:t.userDetails.stdCode,"",null==t.userDetails?null:t.userDetails.phone," "),e.xp6(2),e.Q6J("ngIf",null==t.userDetails?null:t.userDetails.country),e.xp6(2),e.hij(" ",null==t.userDetails?null:t.userDetails.country," "),e.xp6(3),e.Q6J("ngIf",null==t.userDetails||null==t.userDetails.address[0]?null:t.userDetails.address[0].addressline),e.xp6(2),e.hij(" ",null==t.userDetails||null==t.userDetails.address[0]?null:t.userDetails.address[0].addressline," "),e.xp6(2),e.Q6J("ngIf",null==t.userDetails?null:t.userDetails.DOB),e.xp6(2),e.hij(" ",e.xi3(44,16,null==t.userDetails?null:t.userDetails.DOB,"short"),""),e.xp6(4),e.Q6J("ngIf",null==t.userDetails?null:t.userDetails.yourBio),e.xp6(2),e.hij(" ",null==t.userDetails?null:t.userDetails.yourBio," "))},dependencies:[d.O5,d.uU]}),o})();var a=s(433),M=s(4383);function U(o,l){1&o&&(e.TgZ(0,"span"),e._uU(1,"phone no. is required"),e.qZA())}const I=function(){return["required"]};function N(o,l){if(1&o&&(e.TgZ(0,"div",20),e.YNc(1,U,2,0,"span",21),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.phone)("ngIfErrors",e.DdM(2,I))}}function A(o,l){1&o&&(e.TgZ(0,"small",24),e._uU(1," Please enter a valid no. "),e.qZA())}function x(o,l){if(1&o&&(e.ynx(0,22),e.YNc(1,A,2,0,"small",23),e.BQk()),2&o){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.profileUpdate.controls.phone.hasError("pattern"))}}const w=[{path:"",component:h,children:[{path:"",redirectTo:"profile-dashboard",pathMatch:"full"},{path:"profile-dashboard",component:T},{path:"update-profile",component:(()=>{class o{constructor(i,t,r,n,u){this.api=i,this.router=t,this.fb=r,this.spinner=n,this.toast=u,this.fileData=[],this.Submitted=!1,this.fileImageName="",this.isImage=!0,this.profileUpdate=this.fb.group({firstName:[""],email:[""],phone:["",[a.kI.required,a.kI.pattern("[0-9 ]+")]],designation:[""],address:[""],country:[""],DOB:[""],yourBio:[""],profile:[""]})}get f(){return this.profileUpdate.controls}noWhitespaceValidator(i){return 0!==(i.value||"").trim().length?null:{whitespace:!0}}ngOnInit(){this.getbasicDetails(),this.spinner.show(),setTimeout(()=>{this.spinner.hide()},1e3)}getbasicDetails(){this.api.getbasicDetaiofUseer().subscribe(i=>{this.details=i.result[0],this.userName=i.result[0]?.firstName,this.Email=i.result[0].email,this.compname=i.result[0]?.companyName,this.compwebsite=i.result[0]?.companyWebsite,this.number=i.result[0]?.phone,this.addr=i.result[0]?.address[0]?.addressline1,this.designation=i.result[0]?.designation,this.yBio=i.result[0]?.yourBio,this.countryName=i.result[0]?.country,console.log(this.compwebsite,"jojo"),console.log(this.details),console.log(this.details?.address[0]?.addressline1,"ipoeritperi")})}onSelectImage(i){this.Submitted=!0;let t=i.target.files;if(this.fileImageName=i.target.files[0].name,t){this.uploadImage=t[0],this.subImageSubmit();for(let n of t){if(!n.type.includes("image"))return void(this.isImage=!1);this.fileData.push(n)}}if(i.target.files&&i.target.files[0]){var r=new FileReader;r.readAsDataURL(i.target.files[0]),r.onload=n=>{this.url=n.target?.result}}}subImageSubmit(){this.Submitted=!0;let i=new FormData;i.append("attachment",this.uploadImage),this.api.addAttachments(i).subscribe(t=>{this.imageData1=t,this.imageData2=this.imageData1[0].key},t=>{console.log(t)})}onSubmit(i){this.Submitted=!0,this.api.basicDetailofUser({firstName:i?.firstName,description:i?.description,profile:this.imageData2,email:i.email,designation:i?.designation,DOB:i?.DOB,phone:i?.phone,yourBio:i?.yourBio,address:[{addressline1:i.address,country:i.country}]}).subscribe(r=>{this.api.updateImage.next(!0),this.toast.success("submitted"),this.router.navigate(["/home-dashboard/myprofile/profile-dashboard"])},r=>{this.toast.error("not submitted")})}getToday(){return(new Date).toISOString().split("T")[0]}ngOnDestroy(){this.api.updateImage.complete()}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(c.O),e.Y36(p.F0),e.Y36(a.qu),e.Y36(m.t2),e.Y36(M._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-update-profile"]],decls:34,vars:12,consts:[[1,"col-md-7","col-lg-10"],[1,"row","m-0","p-0","mt-5","align-items-center"],[1,"col-md-12","col-lg-12"],[1,"border-bottom"],[1,"row","m-0","p-0","mt-4"],[1,"row","position-relative","pb-5",3,"formGroup","ngSubmit"],[1,"col-md-6","col-lg-6"],[1,"mb-3"],["type","text","placeholder","Full Name","id","exampleInputfiled","aria-describedby","textHelp","formControlName","firstName","readonly","",1,"form-control","light-bg","text-black","rounded-0","p-3",3,"ngModel","ngModelChange"],["type","email","placeholder","Email Address","id","exampleInputemail","aria-describedby","textHelp","formControlName","email","readonly","",1,"form-control","light-bg","text-black","rounded-0","p-3",3,"ngModel","ngModelChange"],["type","text","placeholder","Phone Number","id","exampleInputfiled","aria-describedby","textHelp","formControlName","phone",1,"form-control","light-bg","text-black","rounded-0","p-3",3,"ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIfErrors","ngIf"],["class","po-re",4,"ngIf"],["type","text","placeholder","Designation","id","exampleInputemail","aria-describedby","textHelp","formControlName","designation",1,"form-control","light-bg","text-black","rounded-0","p-3",3,"ngModel","ngModelChange"],["type","file","id","formFile","accept","image/gif, image/jpeg, image/png","formControlName","profile",1,"form-control","light-bg","text-black","border-blue","p-2",3,"change"],["type","text","placeholder","Address","id","exampleInputemail","aria-describedby","textHelp","formControlName","address",1,"form-control","light-bg","text-black","rounded-0","p-3",3,"ngModel","ngModelChange"],["type","text","placeholder","Country","id","exampleInputfiled","aria-describedby","textHelp","formControlName","country","readonly","",1,"form-control","light-bg","text-black","rounded-0","p-3",3,"ngModel","ngModelChange"],["type","date","placeholder","Date Of Birth","id","exampleInputemail","aria-describedby","textHelp","formControlName","DOB",1,"form-control","light-bg","text-black","rounded-0","p-3",3,"max"],["type","text","placeholder","Your Bio","id","exampleInputemail","aria-describedby","textHelp","formControlName","yourBio",1,"form-control","light-bg","text-black","rounded-0","p-3",3,"ngModel","ngModelChange"],["type","submit",1,"btn","green-btn",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf","ngIfErrors"],[1,"po-re"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),e._uU(5,"Create Profile"),e.qZA()(),e.TgZ(6,"div",4)(7,"div",2)(8,"form",5),e.NdJ("ngSubmit",function(){return t.onSubmit(t.profileUpdate.value)}),e.TgZ(9,"div",6)(10,"div",7)(11,"input",8),e.NdJ("ngModelChange",function(n){return t.userName=n}),e.qZA()(),e.TgZ(12,"div",7)(13,"input",9),e.NdJ("ngModelChange",function(n){return t.Email=n}),e.qZA()(),e.TgZ(14,"div",7)(15,"input",10),e.NdJ("ngModelChange",function(n){return t.number=n}),e.qZA(),e.YNc(16,N,2,3,"div",11),e.YNc(17,x,2,1,"ng-container",12),e.qZA(),e.TgZ(18,"div",7)(19,"input",13),e.NdJ("ngModelChange",function(n){return t.designation=n}),e.qZA()(),e.TgZ(20,"div",7)(21,"input",14),e.NdJ("change",function(n){return t.onSelectImage(n)}),e.qZA()()(),e.TgZ(22,"div",6)(23,"div",7)(24,"input",15),e.NdJ("ngModelChange",function(n){return t.addr=n}),e.qZA()(),e.TgZ(25,"div",7)(26,"input",16),e.NdJ("ngModelChange",function(n){return t.countryName=n}),e.qZA()(),e.TgZ(27,"div",7),e._UZ(28,"input",17),e.qZA(),e.TgZ(29,"div",7)(30,"input",18),e.NdJ("ngModelChange",function(n){return t.yBio=n}),e.qZA()()(),e.TgZ(31,"div",6)(32,"button",19),e._uU(33,"Create Profile"),e.qZA()()()()()()()()),2&i&&(e.xp6(8),e.Q6J("formGroup",t.profileUpdate),e.xp6(3),e.Q6J("ngModel",t.userName),e.xp6(2),e.Q6J("ngModel",t.Email),e.xp6(2),e.Q6J("ngModel",t.number),e.xp6(1),e.Q6J("ngIf",t.Submitted&&t.f.phone),e.xp6(1),e.Q6J("ngIf",t.profileUpdate.controls.phone.touched&&!t.profileUpdate.controls.phone.valid),e.xp6(2),e.Q6J("ngModel",t.designation),e.xp6(5),e.Q6J("ngModel",t.addr),e.xp6(2),e.Q6J("ngModel",t.countryName),e.xp6(2),e.Q6J("max",t.getToday()),e.xp6(2),e.Q6J("ngModel",t.yBio),e.xp6(2),e.Q6J("disabled",!t.profileUpdate.valid))},dependencies:[d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]}),o})()}]}];let P=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(w),p.Bz]}),o})(),J=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,P,a.UX,a.u5,m.ef]}),o})()}}]);